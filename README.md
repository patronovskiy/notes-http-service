# notes-http-service
RESTful API сервис для работы с заметками (короткими текстовыми документами).

## Общее описание
* Сервис работает на порту 8080 (номер порта задается в настройках);
* Заметки сохраняются в формате json как отдельные документы, имя каждой заметки соответвует ее id; 
* Такое решение было выбрано, так как большинстов запросов, описанных в ТЗ, обращаются к заметкам по id. 
  Хранение заметок в виде отдельных документов позволяет обратиться сразу к нужному файлу, без перебора других заметок;
* За основу была взята концепция документ-ориентированной базы данных;
* Для отслеживания присвоенных номеров id используется файл для "переменных приложения" appVariables.json, который изменяется приложением в процессе работы;
* Сервис написан на Java 11 с использованием Spring Boot 2;

## Запросы и ответы
### POST-запрос c заметкой в формате json на /notes - сохранение заметки
#### Тело запроса вида:
`{
   "title":"test title 1",
   "content" : "test content 1"
     }`
   либо
`{
   "content" : "test content 1"
   }`
#### Ответы:
* Ответ в нормальном случае : заметка в формате json (с id) и код 200
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500

### GET-запрос на /notes без параметров - получение списка всех заметок
#### Ответы:
* Ответ в нормальном случае : все заметки в формате json и код 200
* При отсутвии заметок: пустой json и код 200 
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500

### GET-запрос на /notes/{id} - получение заметки по id
#### Ответы:
* Ответ в нормальном случае : заметка в формате json и код 200
* При отсутвии заметки: строка с текстом ошибки и код 404
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500

### GET-запрос на /notes?query=текст_запроса (с параметром query) - поиск всех заметок, содержащих текст запроса в поле title и/или content
#### Ответы:
* Ответ в нормальном случае : все заметки в формате json, содержащие текст запроса в поле title и/или content, и код 200
* При отсутвии заметок по заданному запросу: строка с текстом ошибки и код 404
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500

### PUT-запрос на /notes/{id} - редактирование заметки по id
#### Тело запроса вида:
`{
"title":"test title 1",
"content" : "test content 1"
}`
либо
`{
"content" : "test content 1"
}`
либо
`{
"title":"test title 1"
}`

#### Ответы:
* Ответ в нормальном случае : измененная заметка в формате json и код 200
* При отсутвии заметки: строка с текстом ошибки и код 404
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500

### DELETE-запрос на /notes/{id} - удаление заметки по id
#### Ответы:
* Ответ в нормальном случае : строка с сообщением о том, что заметка удалена и код 200
* При отсутвии заметки: строка с текстом ошибки и код 404
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500

### GET-запрос на /service/clear?key=значение_ключа - сброс приложения
#### Ответы:
* Ответ в нормальном случае : строка с сообщением о том, что заметка удалена все заметки удалены и код 200
* Некорректный запрос: строка с текстом ошибки и код 400
* Ошибка на сервере: ответ Spring Boot по умолчанию и код 500


## Настройки
### application.properties
Этот файл не должен быть доступен извне лицам без прав администратора.
Содержит настройки для работы приложения.

1. files-storage-path - путь к директории для хранения файлов 
2. variables-path - путь к данным о текущем состоянии хранилища (изменяется программой при работе) 
3. chars-number - количество символов, которые попадают из текста заметки в название при отсутсвии названия
4. clear-key - ключ для сброса приложения
5. server.port - номер порта